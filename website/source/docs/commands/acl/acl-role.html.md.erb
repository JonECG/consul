---
layout: "docs"
page_title: "Commands: ACL Role Management"
sidebar_current: "docs-commands-acl-role"
---

-> **1.5.0+:**  These commands are available in Consul versions 1.5.0 and later.

# Consul ACL Roles

Command: `consul acl role`

The `acl role` command is used to manage Consul's ACL roles. There are
subcommands for the individual operations that can be performed.

* [`create`](#create)
* [`read`](#read)
* [`update`](#update)
* [`delete`](#delete)
* [`list`](#list)

ACL roles are also accessible via the [HTTP API](/api/acl/roles.html).

Usage: `consul acl role <subcommand> [options] [args]`

-> **Note:** All of the examples show for the subcommands will require a valid
Consul token with the appropriate permissions.  Either set the
`CONSUL_HTTP_TOKEN` environment variable to the tokens secret ID or pass the
secret ID as the value of the `-token` parameter.

## Identifying Roles

In several of the subcommands a role will have to be identified to be read,
modified, or deleted. Those subcommands support specifying the role by its ID
using the `-id` parameter or by name using the `-name` parameter. When
specifying the role by its ID a unique role ID prefix may be specified instead
of the entire UUID. As long as it is unique it will be resolved to the full
UUID and used.

## Common Subcommand Options

All of the `consul acl role` subcommands support the following options:

<%= partial "docs/commands/http_api_options_client" %>
<%= partial "docs/commands/http_api_options_server" %>

## `create`

Command: `consul acl role create`

This command creates new roles.

### Usage

Usage: `consul acl role create [options] [args]`

#### Options

* [Common Subcommand Options](#common-subcommand-options)

* `-description=<string>` - A description of the role.

* `-meta` - Indicates that role metadata such as the content hash and raft
   indices should be shown for each entry.

* `-name=<string>` - The new role's name. This flag is required.

* `-policy-id=<value>` - ID of a policy to use for this role. May be specified
  multiple times

* `-policy-name=<value>` - Name of a policy to use for this role. May be
  specified multiple times

* `-service-identity=<value>` - Name of a service identity to use for this
  role. May be specified multiple times. Format is the `SERVICENAME` or
  `SERVICENAME:DATACENTER1,DATACENTER2,...`

### Examples

Create a new role with one policy:

```sh
$ consul acl role create -name "crawler" -description "web crawler role" -policy-name "crawler-kv"
ID:           e44692f8-bcf5-a8cc-3607-315aa420c314
Name:         crawler
Description:  web crawler role
Policies:
   e7f70121-3235-8909-748f-fc6dd30490ce - crawler-kv
Service Identities:
```

Create a new role with one service identity:

```sh
$ consul acl role create -name archiver -service-identity "archiver:dc2"
ID:           d8317c3c-899b-0229-f6fe-ebc130878167
Name:         archiver
Description:  
Policies:
Service Identities:
   archiver (Datacenters: dc2)
```

## `read`

Command: `consul acl role read`

This command reads and displays a roles details.

### Usage

Usage: `consul acl role read [options] [args]`

#### Options

* [Common Subcommand Options](#common-subcommand-options)

* `-id=<string>` - The ID of the role to read. It may be specified as a unique ID
   prefix but will error if the prefix matches multiple role IDs.

* `-meta` - Indicates that role metadata such as the content hash and raft
  indices should be shown for each entry.

* `-name=<string>` - The name of the role to read.

### Examples

Get role details:

```sh
$ consul acl role read -id e44692f8-bcf5-a8cc-3607-315aa420c314
ID:           e44692f8-bcf5-a8cc-3607-315aa420c314
Name:         crawler
Description:  web crawler role
Policies:
   e7f70121-3235-8909-748f-fc6dd30490ce - crawler-kv
Service Identities:
```

Get role details by name:

```sh
$ consul acl role read -name archiver
ID:           d8317c3c-899b-0229-f6fe-ebc130878167
Name:         archiver
Description:  
Policies:
Service Identities:
   archiver (Datacenters: dc2)
```

## `update`

Command: `consul acl role update`

This command is used to update a role. The default operations is to merge the
current role with those values provided to the command invocation. Therefore to
update just one field, only the `-id` or `-name` options and the option to
modify must be provided. Note that renaming roles requires both the `-id` and
`-name` as the new name cannot yet be used to lookup the role.

### Usage

Usage: `consul acl role update [options] [args]`

#### Options

* [Common Subcommand Options](#common-subcommand-options)

* `-description=<string>` - A description of the role.

* `-id=<string>` - The ID of the role to update. It may be specified as a
  unique ID prefix but will error if the prefix matches multiple role IDs


* `-meta` - Indicates that role metadata such as the content hash and raft
  indices should be shown for each entry

* `-name=<string>` - The role name.

* `-no-merge` - Do not merge the current role information with what is provided
  to the command. Instead overwrite all fields with the exception of the role
  ID which is immutable.

* `-policy-id=<value>` - ID of a policy to use for this role. May be specified
  multiple times

* `-policy-name=<value>` - Name of a policy to use for this role. May be
  specified multiple times

* `-service-identity=<value>` - Name of a service identity to use for this
  role. May be specified multiple times. Format is the `SERVICENAME` or
  `SERVICENAME:DATACENTER1,DATACENTER2,...`

### Examples

Update a role:

```sh
$ consul acl role update -id e44692f8-bcf5-a8cc-3607-315aa420c314 \
    -description 'better description' -service-identity 'crawler'
Role updated successfully
ID:           e44692f8-bcf5-a8cc-3607-315aa420c314
Name:         crawler
Description:  better description
Policies:
   e7f70121-3235-8909-748f-fc6dd30490ce - crawler-kv
Service Identities:
   crawler (Datacenters: all)
```

Rename a role:

```sh
$ consul acl role update -id d8317 -name web-crawler
Role updated successfully
ID:           d8317c3c-899b-0229-f6fe-ebc130878167
Name:         web-crawler
Description:  
Policies:
Service Identities:
   archiver (Datacenters: dc2)
```

## `delete`

Command: `consul acl role delete`

This command deletes a role. Roles may be deleted by their ID or by name.

### Usage

Usage: `consul acl role delete [options]`

#### Options

* [Common Subcommand Options](#common-subcommand-options)

* `-id=<string>` - The ID of the role to delete. It may be specified as a
  unique ID prefix but will error if the prefix matches multiple role IDs.

* `-name=<string>` - The Name of the role to delete.

### Examples

Delete a role:

```sh
$ consul acl role delete -id d8317
Role "d8317c3c-899b-0229-f6fe-ebc130878167" deleted successfully
```

Delete a role by name:

```sh
$ consul acl role delete -name crawler
Role "e44692f8-bcf5-a8cc-3607-315aa420c314" deleted successfully
```

## `list`

Command: `consul acl role list`

This command lists all roles. By default it will not show metadata.

### Usage

Usage: `consul acl role list`

#### Options

* [Common Subcommand Options](#common-subcommand-options)

* `-meta` - Indicates that role metadata such as the content hash and
   Raft indices should be shown for each entry.

### Examples

Default listing.

```sh
$ consul acl role list
crawler:
   ID:           2169f201-7ecb-b460-bdc6-aa3aff752ed5
   Description:  role for web crawler
   Policies:
      e7f70121-3235-8909-748f-fc6dd30490ce - crawler-kv
   Service Identities:
archiver:
   ID:           36c354c4-94b0-72e4-7de9-e2e454fd8c53
   Description:  
   Policies:
   Service Identities:
      archiver (Datacenters: dc2)
```

Show Metadata.

```sh
$ consul acl role list -meta
crawler:
   ID:           2169f201-7ecb-b460-bdc6-aa3aff752ed5
   Description:  role for web crawler
   Hash:         d24823ed992714d05f12396c8a2a8d317686fe62fd8fbb2d035e1dcfc1b8c476
   Create Index: 358
   Modify Index: 358
   Policies:
      e7f70121-3235-8909-748f-fc6dd30490ce - crawler-kv
   Service Identities:
archiver:
   ID:           36c354c4-94b0-72e4-7de9-e2e454fd8c53
   Description:  
   Hash:         333a867fa51887b588fc353604832735a3d9305b91a9c6b57affc198ebf30b28
   Create Index: 360
   Modify Index: 360
   Policies:
   Service Identities:
      archiver (Datacenters: dc2)
```
